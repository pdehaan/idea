@import "./functions";

// Get modifiers
// converts a sass nested-map into a modifier
// using get function
// usage @include get-modifiers('heading.margin')
@mixin get-modifiers($key, $map: $tokens, $prefix: "-") {
  $modifiers: get($key);

  @each $item, $value in $modifiers {
    @if type-of($value) == "map" {
      &#{$prefix}#{$item} {
        @include get-modifiers("#{$key}.#{$item}");
      }
    } @else {
      #{$item}: $value;
    }
  }
}


@mixin class-generator($key, $attribute, $map: $tokens, $prefix: "-") {
  // get a predefined map
  $map: get($key, $map);
  @if type-of($map) != "map" {
    @error 'Incorrect map type `#{$map}`, map is required';
  } @else {
    // loop through maps
    @each $item, $value in $map {
      // generate utility classes from keys
      // e.g. a color map containing colors .color-key { color: value }
      // prefix class if necessary
      &#{$prefix}#{$attribute} {
        @if type-of($value) == "map" {
          @include generator("#{$key}.#{$item}");
        } @else {
          #{$attribute}: $value;
        }
      }
    }
  }
}

